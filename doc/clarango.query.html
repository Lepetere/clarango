<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clarango.query documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clarango</span> <span class="project-version">0.7.1</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clarango</span></div></div></li><li class="depth-2 branch"><a href="clarango.collection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></a></li><li class="depth-2 branch"><a href="clarango.collection-ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection-ops</span></div></a></li><li class="depth-2 branch"><a href="clarango.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="clarango.database.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>database</span></div></a></li><li class="depth-2 branch"><a href="clarango.document.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>document</span></div></a></li><li class="depth-2 branch"><a href="clarango.graph.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graph</span></div></a></li><li class="depth-2 branch"><a href="clarango.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="clarango.misc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>misc</span></div></a></li><li class="depth-2 branch current"><a href="clarango.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="clarango.transaction.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transaction</span></div></a></li><li class="depth-2 branch"><a href="clarango.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utilities</span></div></div></li><li class="depth-3 branch"><a href="clarango.utilities.core-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-utility</span></div></a></li><li class="depth-3 branch"><a href="clarango.utilities.http-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-utility</span></div></a></li><li class="depth-3"><a href="clarango.utilities.uri-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uri-utility</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clarango.query.html#var-delete-cursor"><div class="inner"><span>delete-cursor</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-delete-function"><div class="inner"><span>delete-function</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-execute"><div class="inner"><span>execute</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-execute-count"><div class="inner"><span>execute-count</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-explain"><div class="inner"><span>explain</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-get-functions"><div class="inner"><span>get-functions</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-get-more-results"><div class="inner"><span>get-more-results</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-new-function"><div class="inner"><span>new-function</span></div></a></li><li class="depth-1"><a href="clarango.query.html#var-validate"><div class="inner"><span>validate</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clarango.query</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-delete-cursor"><h3>delete-cursor</h3><div class="usage"><code>(delete-cursor cursor-id &amp; args)</code></div><div class="doc"><pre class="plaintext">This method deletes a cursor on the server.
If you don&apos;t intend to make further use of a cursor, you should always delete it to free resources on the server.
If all available documents of the query were already retrieved by the client, the cursor was already destroyed automatically.

Takes as first argument the id of the cursor to be deleted.
The id was returned by the execute and the get-more-results method.

Optionally you can pass a database name. If omitted, the default db will be used.</pre></div></div><div class="public anchor" id="var-delete-function"><h3>delete-function</h3><div class="usage"><code>(delete-function function-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Deletes a user defined function with the given name.

First argument: A string representing the full user defined function name.

Response codes are as follows:
HTTP 200: The function will be removed by the server.
HTTP 400: The request is badly formed.
HTTP 404: The specified function was not found.</pre></div></div><div class="public anchor" id="var-execute"><h3>execute</h3><div class="usage"><code>(execute query-string &amp; args)</code></div><div class="doc"><pre class="plaintext">Executes a query.

First argument must be the query string to be executed.

If the query references any bind variables, you must additionally pass these in a map as the second argument like this:
{ &apos;id&apos; 3 } (replace the single quotes with double quotes)
If you don&apos;t use any variables, you can leave this out.

Optionally you can pass a database name as third (or second) argument. If omitted, the default db will be used.

The actual result of the query will be contained in the attribute &apos;result&apos; as a vector.
For more options see the method execute-count.</pre></div></div><div class="public anchor" id="var-execute-count"><h3>execute-count</h3><div class="usage"><code>(execute-count query-string batch-size count &amp; args)</code></div><div class="doc"><pre class="plaintext">Executes a query. Takes also the options &apos;batch-size&apos; and &apos;count&apos;.

First argument must be the query string to be executed.

Second argument must be the batch size. This is the amount of documents that will be returned in the first answer of the
server. In case there are more documents, in the server answer there will be the attribute &apos;hasMore&apos; set to true.
In this case you can then use the returned cursor &apos;id&apos; with the method get-more-results to get the remaining results.

Third argument is &apos;count&apos;, a boolean flag indicating whether or not the number of documents that were found for the query
should be included in the result of the query as &apos;count&apos; attribute. This is turned off by default because it might have
an influence on the performance of the query.

If the query references any bind variables, you must additionally pass these in a map as the fourth argument like this:
{ &apos;id&apos; 3 } (replace the single quotes with double quotes)
If you don&apos;t use any variables, you can leave this out.

Optionally you can pass a database name as fifth or fourth argument. If omitted, the default db will be used.

The actual result of the query will be contained in the attribute &apos;result&apos; as a vector.</pre></div></div><div class="public anchor" id="var-explain"><h3>explain</h3><div class="usage"><code>(explain query-string &amp; args)</code></div><div class="doc"><pre class="plaintext">Explains how a query would be executed on the server. Returns an execution plan for the query.

First argument must be the query string to be evaluated.
If the query references any bind variables, you must pass these in a map as second argument like this:
{ &apos;id&apos; 3 } (replace the single quotes with double quotes)
If you don&apos;t use any variables, you can leave the second argument out.

Optionally you can pass a database name as third or second argument. If omitted, the default db will be used.</pre></div></div><div class="public anchor" id="var-get-functions"><h3>get-functions</h3><div class="usage"><code>(get-functions &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns all user defined functions in the database.

Will return a JSON array with all user defined functions in the format:
[
    {
        &quot;name&quot; : &quot;myfunctions::temperature::celsiustofahrenheit&quot;,
        &quot;code&quot; : &quot;function (celsius) { return celsius * 1.8 + 32; }&quot;
    }
]</pre></div></div><div class="public anchor" id="var-get-more-results"><h3>get-more-results</h3><div class="usage"><code>(get-more-results cursor-id &amp; args)</code></div><div class="doc"><pre class="plaintext">This method gets the remaining results of a query. More results to a query are available if the return value of the
execute method contained an attribute &apos;hasMore&apos; set to true.
If after the execution of this method there are still more results to the query, the return value of this method will
also contain an attribute &apos;hasMore&apos; that is set to true.

Takes as first argument the id of the cursor that was returned by the execute method.

Optionally you can pass a database name. If omitted, the default db will be used.</pre></div></div><div class="public anchor" id="var-new-function"><h3>new-function</h3><div class="usage"><code>(new-function name code &amp; args)</code></div><div class="doc"><pre class="plaintext">Create a new user defined function.

First argument: A string representing the new function name
(e.g. &apos;myfunctions::temperature::celsiustofahrenheit&apos;)
Second argument: A stringified JavaScript function representing the code to be run
(e.g. &apos;function (celsius) { return celsius * 1.8 + 32; }&apos;)

Respoonse codes are as follows:
HTTP 200: Function was found and replaced by this call.
HTTP 201: Function did not exist but was created.
HTTP 400: Malformed request.</pre></div></div><div class="public anchor" id="var-validate"><h3>validate</h3><div class="usage"><code>(validate query-string)</code></div><div class="doc"><pre class="plaintext">Validates a query without executing it.
As a return value you get a map containing the names of the collections and the vars used in the query.
If the query is not valid also an error will be thrown including an error message with the problem found in the query.

Takes as only argument the query string to be evaluated.</pre></div></div></div></body></html>