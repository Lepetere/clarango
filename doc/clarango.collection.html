<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clarango.collection documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clarango</span> <span class="project-version">0.7.1</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clarango</span></div></div></li><li class="depth-2 branch current"><a href="clarango.collection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></a></li><li class="depth-2 branch"><a href="clarango.collection-ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection-ops</span></div></a></li><li class="depth-2 branch"><a href="clarango.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="clarango.database.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>database</span></div></a></li><li class="depth-2 branch"><a href="clarango.document.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>document</span></div></a></li><li class="depth-2 branch"><a href="clarango.graph.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graph</span></div></a></li><li class="depth-2 branch"><a href="clarango.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="clarango.misc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>misc</span></div></a></li><li class="depth-2 branch"><a href="clarango.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="clarango.transaction.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transaction</span></div></a></li><li class="depth-2 branch"><a href="clarango.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utilities</span></div></div></li><li class="depth-3 branch"><a href="clarango.utilities.core-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-utility</span></div></a></li><li class="depth-3 branch"><a href="clarango.utilities.http-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-utility</span></div></a></li><li class="depth-3"><a href="clarango.utilities.uri-utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uri-utility</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clarango.collection.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-all-documents"><div class="inner"><span>get-all-documents</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-all-indexes"><div class="inner"><span>get-all-indexes</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-delayed-collection"><div class="inner"><span>get-delayed-collection</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-extended-info"><div class="inner"><span>get-extended-info</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-extended-info-count"><div class="inner"><span>get-extended-info-count</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-extended-info-figures"><div class="inner"><span>get-extended-info-figures</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-get-info"><div class="inner"><span>get-info</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-load-mem"><div class="inner"><span>load-mem</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-modify-properties"><div class="inner"><span>modify-properties</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-rename"><div class="inner"><span>rename</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-rotate"><div class="inner"><span>rotate</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-truncate"><div class="inner"><span>truncate</span></div></a></li><li class="depth-1"><a href="clarango.collection.html#var-unload-mem"><div class="inner"><span>unload-mem</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clarango.collection</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create collection-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Creates a new collection.

Takes the name of the new collection as first argument.

Takes optionally a database name and a map containing options as further arguments. 
These arguments may be passed in arbituary order.
If the database name is omitted by the user, the default db will be used.

Possible options in the options map are:
{&apos;waitForSync&apos; true/false, &apos;doCompact&apos; true/false, &apos;journalSize&apos; journal_size, &apos;isSystem&apos; true/false, 
&apos;isVolatile&apos; true/false, &apos;type&apos; 2/3, &apos;keyOptions&apos; [...see below...]} (replace the single quotes with double quotes)
- waitForSync meaning if the server response should wait until the document is saved to disk
- doCompact meaning whether of not the collection will be compacted (default is true)
- journalSize is the maximum size of a journal or datafile; must at least be 1 MB; this can limit also the maximum size of a single object
- isSystem meaning if a system collection should be created (default is false)
- isVolatile meaning if the collection should only be kept in-memory and not made persistent
  --&gt; keeping the collection in-memory only will make it slightly faster, but restarting the server will cause full loss
- type is the type of the collection: 2 = document collection (default), 3 = edges collection
- keyOptions: a JSON array containing the following options for key generation:
    - type is the type of the key generator (currently available are &apos;traditional&apos; and &apos;autoincrement&apos;)
    - allowUserKeys true/false means if true the user can supply his own keys on creating a document; 
        when set to false only the key generator will be responsible for creating the keys;
    - increment is the increment value for the autoincrement key generator (optional)
    - offset is the initial offset value for the autoincrement key generator (optional)</pre></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete collection-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Deletes a collection.

Takes the name of the collection to be deleted as first argument.
Optionally you can pass a database name as second argument.</pre></div></div><div class="public anchor" id="var-get-all-documents"><h3>get-all-documents</h3><div class="usage"><code>(get-all-documents &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns a vector with the URIs (or keys or ids) of all documents in the collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as first and a database name as second argument. 
You can also include a map as a last argument containing the &apos;type&apos; parameter that specifies whether vector of URIs, 
keys or ids should be returned.

E.g. this method call:
    (get-all-documents &quot;collection-name&quot; {:type &quot;id&quot;}) 
will return list of document ids.</pre></div></div><div class="public anchor" id="var-get-all-indexes"><h3>get-all-indexes</h3><div class="usage"><code>(get-all-indexes &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns a list with the URIs of all indexes for the collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as the first argument and a database name as the second argument.</pre></div></div><div class="public anchor" id="var-get-delayed-collection"><h3>get-delayed-collection</h3><div class="usage"><code>(get-delayed-collection &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns a map with all documents in the collection as delays in the form {:document-key (delay (document/get document-name)) ...}.

If you want to retreive the content of a document, just dereference it like so:
@(get delayed-collection &apos;document-key&apos;).

Takes the collection name as first and the database name as second argument. Both are mandatory.</pre></div></div><div class="public anchor" id="var-get-extended-info"><h3>get-extended-info</h3><div class="usage"><code>(get-extended-info &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns extended information about a collection. Forces a load of the collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-get-extended-info-count"><h3>get-extended-info-count</h3><div class="usage"><code>(get-extended-info-count &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns extended information about a collection including the number of documents in the collection.
Forces a load of the collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-get-extended-info-figures"><h3>get-extended-info-figures</h3><div class="usage"><code>(get-extended-info-figures &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns extended information about a collection including detailed information about the documents in the collection.
Forces a load of the collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-get-info"><h3>get-info</h3><div class="usage"><code>(get-info &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns information about a collection.

Can be called without arguments. In that case the default collection from the default database will be used.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-load-mem"><h3>load-mem</h3><div class="usage"><code>(load-mem &amp; args)</code></div><div class="doc"><pre class="plaintext">Loads a collection into the memory. Returns the collection on success. (?)

Can be called without arguments. In that case the default collection from the default database will be loaded.
Optionally you can pass a collection name, a database name and a map with options as arguments.
Possible options in the options map are:
{&apos;count&apos; true/false}
- count meaning if the return value should contain the number of documents in the collection
  -&gt; the default is true, but setting it to false may speed up the request

The option map might be passed in an arbitrary position between the other arguments.</pre></div></div><div class="public anchor" id="var-modify-properties"><h3>modify-properties</h3><div class="usage"><code>(modify-properties properties &amp; args)</code></div><div class="doc"><pre class="plaintext">Modifies  the properties of a collection.

As first argument expects a map with options.
Takes optional a collection name and a db name as further arguments.
If omitted by user, the default db and collection will be used.

Possible options in the options map are:
{&apos;waitForSync&apos; true/false &apos;journalSize&apos; size}
- waitForSync meaning if the server response should wait until the document is saved to disk
- journalSize is the size (in bytes) for new journal files that are created for the collection</pre></div></div><div class="public anchor" id="var-rename"><h3>rename</h3><div class="usage"><code>(rename new-name collection-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Renames a collection. On success return a map with properties.

First argument: The new collection name
Second argument: The old collection name

Takes optional a db name as further argument.
If omitted by user, the default db will be used.</pre></div></div><div class="public anchor" id="var-rotate"><h3>rotate</h3><div class="usage"><code>(rotate &amp; args)</code></div><div class="doc"><pre class="plaintext">Rotates the journal of a collection. 
This means the current journal of the collection will be closed and all
data made read-only in order to compact it. New documents will be stored in a new journal.

Can be called without arguments. In that case the default collection from the default database will be rotated.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-truncate"><h3>truncate</h3><div class="usage"><code>(truncate &amp; args)</code></div><div class="doc"><pre class="plaintext">Removes all documents from a collection, but leaves the indexes intact.

Can be called without arguments. In that case the default collection from the default database will be truncated.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div><div class="public anchor" id="var-unload-mem"><h3>unload-mem</h3><div class="usage"><code>(unload-mem &amp; args)</code></div><div class="doc"><pre class="plaintext">Removes a collection from the memory. On success a map containing collection properties is returned.

Can be called without arguments. In that case the default collection from the default database will be truncated.
Optionally you can pass a collection name as first and a database name as second argument.</pre></div></div></div></body></html>